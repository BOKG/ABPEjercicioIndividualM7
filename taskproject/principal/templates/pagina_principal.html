{% extends 'base.html' %}
{% load static %}
{% block contenido %}
<!-- pagina_principal.html -->
    <h1>Tareas Pendientes</h1>

    <!-- Filtros -->
    <form method="GET" action="{% url 'pagina_principal' %}">
        <label for="etiqueta">Filtrar por etiqueta:</label>
        <select name="etiqueta" id="etiqueta">
            <option value="">Todas las etiquetas</option>
            <!-- Renderizar opciones de etiquetas -->
            {% for etiqueta in etiquetas %}
                <option value="{{ etiqueta.nombre }}">{{ etiqueta.nombre }}</option>
            {% endfor %}
        </select>
        <br>
        <label for="estado">Filtrar por estado:</label>
        <select name="estado" id="estado">
            <option value="">Todos los estados</option>
            <!-- Renderizar opciones de estados -->
            {% for choice in tasklistview.get_status_choices %}
                <option value="{{ choice.0 }}">{{ choice.1 }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Filtrar">
    </form>

    <!-- Lista de tareas -->
    <ul>
        {% for tarea in tareas %}
            <li>
                <h2>{{ tarea.title }}</h2>
                <p>{{ tarea.description }}</p>
                <p>Fecha de vencimiento: 
                {{ tarea.due_date|date:'Y-m-d' }}
                </p>
                <p>Estado: {{ tarea.status }}</p>
                <p>Etiqueta: {{ tarea.label }}</p>
                {% comment %} <a href="{% url 'editar_tarea' tarea.pk %}">Editar</a>
                <a href="{% url 'eliminar_tarea' tarea.pk %}">Eliminar</a>
                <a href="{% url 'detalles_tarea' tarea.pk %}">Detalles</a> {% endcomment %}
            </li>
        {% empty %}
            <li>No hay tareas pendientes.</li>
        {% endfor %}
    </ul>

    <!-- Enlaces de navegaciÃ³n -->
    <a href="{% url 'crear_tarea' %}">Crear nueva tarea</a>
{% endblock %}
